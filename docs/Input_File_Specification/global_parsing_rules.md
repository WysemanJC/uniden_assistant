# Global Parsing Rules

Core rules for parsing SDSx00 input files (encoding, delimiters, ID hierarchy, TGID formats, and common parameters).

[← Back to Main Index](README.md)

---

## Core File Rules

- **Encoding**: ASCII.
- **Line format**: One line = one sentence/record.
- **Field delimiter**: **Tab** (`\t`) separates command and parameters.
- **Sub-delimiters** inside fields: `=`, `/`, or `,` are used by the spec.

### Common Field Formats

- **NameTag**: ASCII 0x20–0x7E, max length 64.
- **Frequency**: stored as Hz integers; 1 = 1 Hz (e.g., 851.0125 MHz → 851012500).
- **Latitude/Longitude**: degree format; up to 6 decimals.
- **Timestamp**: `MM/DD/YYYY hh:mm:ss`.
- **Avoid in HPDB**: typically `Off`; actual avoid handled in `*.avoid` files.

---

## MyId/ParentId: HPDB Resource Hierarchy

Each resource in HPDB has **two essential IDs** forming a parent-child relationship:

- **MyId** (self ID): Uniquely identifies the current resource within its category.
  - Format: `XxxId=xx` where `Xxx` is the resource type (e.g., `AgencyId=15`)
  - Scope: Unique within the parent container
  - Generated by: Device during import; parsed from HPDB files

- **ParentId** (parent ID): Identifies the resource's container/parent in the hierarchy.
  - Format: `XxxId=xx` matching the parent resource type
  - Establishes: Parent-child relationship for data organization
  - Null/empty: Allowed in Favorites Lists (spec note)

**HPDB Resource Hierarchy Chain:**

```
Country (CountryId=xx)
  └─ State (StateId=xx, ParentId=CountryId)
		└─ County (CountyId=xx, ParentId=StateId)
			 └─ Agency (AgencyId=xx, ParentId=CountyId)
				  ├─ Conventional Frequency (CFreqId=xx, ParentId=AgencyId)
				  ├─ Channel Group (CGroupId=xx, ParentId=AgencyId)
				  │   └─ Conventional Frequency (CFreqId=xx, ParentId=CGroupId)
				  └─ [LM/TGID data]
			 └─ Site (SiteId=xx, ParentId=TrunkId)
				  ├─ Trunking System (TrunkId=xx, ParentId=CountyId)
				  │   ├─ Talkgroup (TGroupId=xx, ParentId=TrunkId)
				  │   │   └─ Trunking Frequency (TFreqId=xx, ParentId=TGroupId)
				  │   └─ Talkgroup Frequency (TFreqId=xx, ParentId=SiteId)
```

**Common ID Parameters:**
- `CountryId`: Country code (e.g., `CountryId=1` for USA, `CountryId=2` for Canada)
- `StateId`: State within country (e.g., `StateId=06` for California)
- `CountyId`: County within state
- `AgencyId`: Agency/system within county
- `TrunkId`: Trunking system identifier
- `SiteId`: Individual site/repeater identifier
- `CGroupId`: Conventional channel group
- `CFreqId`: Conventional frequency record
- `TGroupId`: Talkgroup (trunking group)
- `TFreqId`: Trunking frequency record
- `Tid`: Talkgroup ID (numeric)

**Special Cases:**
- **Favorites List `.hpd` files**: MyId and ParentId may be **null** or empty.
- **Scan Configuration records** (`ScanListType`, `ScanConvSystem`, etc.): Use ParentId to reference parent list/system.
- **Area records** (`AreaState`, `AreaCounty`): Link geographic coverage using parent IDs.

---

## TGID (Talkgroup ID) Format Specifications

TGID formats vary by system type. Below are all supported formats.

### MOTOROLA TYPE I

Format validation varies by pattern (see Types 1–7 below).

1. **BFF-SS** (Normal ID)
	- B: 1 digit (BLOCK)
	- FF: 2 digits, 0-filled (FLEET)
	- SS: 1–2 digits (SUB-FLEET)
	- Example: `1-02-5`, `2-15-12`

2. **BFFF-S** (Normal ID when FLEET is 100–127)
	- B: 1 digit (BLOCK)
	- FFF: 3 digits (FLEET)
	- S: 1 digit (SUB-FLEET)
	- Example: `1-100-5`, `2-127-9`

3. **B-** (Partial ID: free FLEET and SUB-FLEET)
	- B: 1 digit (BLOCK)
	- Wildcard: represents any FLEET/SUB-FLEET

4. **BFF-** (Partial ID: free SUB-FLEET)
	- B: 1 digit (BLOCK)
	- FF: 2 digits, 0-filled (FLEET)
	- Wildcard: represents any SUB-FLEET

5. **BFFF-** (Partial ID when FLEET is 100–127)
	- B: 1 digit (BLOCK)
	- FFF: 3 digits (FLEET)
	- Wildcard: represents any SUB-FLEET

6. **NNNNN** (Normal ID when SIZE CODE is 0)
	- NNNNN: 1–5 digits (numeric ID)

7. **iNNNNN** (I-CALL ID)
	- i: prefix (literal `i`)
	- NNNNN: 1–5 digits (numeric ID)

**Note**: TYPE I format has no format validation.

### MOTOROLA TYPE II

1. **NNNNN** (Normal ID)
	- Range: 1–65535

2. **iNNNNN** (I-CALL ID)
	- Range: i0–i65535

### P25

1. **NNNNN** (Normal ID)
	- Range: 1–65535

2. **iNNNNNNNN** (I-CALL ID)
	- Range: i0–i16777215

**Note**: P25 does **not** support Partial IDs.

### DMR / MotoTRBO

1. **NNNNNNNN** (Normal ID)
	- Range: 1–16777215

2. **iNNNNNNNN** (I-CALL ID)
	- Range: i0–i16777215

**Note**: DMR does **not** support Partial IDs.

### NXDN

1. **NNNNN** (Normal ID)
	- Range: 0–65535

2. **iNNNNN** (I-CALL ID)
	- Range: i0–i65535

**Note**: NXDN does **not** support Partial IDs.

### EDACS

1. **AA-FFS** (Normal ID)
	- AA: 2 digits, 0-filled (AGENCY: 00–15)
	- FF: 2 digits, 0-filled (FLEET: 00–15)
	- S: 1 digit (SUB-FLEET: 0–7)
	- Range: decimal 1–2047

2. **AA---** (Partial ID: free FLEET and SUB-FLEET)
3. **AA-FF-** (Partial ID: free SUB-FLEET)

4. **iNNNNNN** (I-CALL ID)
	- Range: i0–i1048575

5. **NNNNN** (EA: Extended Addressing System)
	- Range: 2048–65535

**Constraint**: `00-00-0` (all zeros) is invalid.

### LTR

1. **A-RR-NNN** (Normal ID)
	- A: 1 digit (AREA CODE: 0–1)
	- RR: 2 digits, 0-filled (HOME REPEATER: 01–20)
	- NNN: 3 digits, 0-filled (ID: 000–254)

2. **A-RR---** (Partial ID)
	- Wildcard: represents any ID

**Note**: LTR does **not** support I-CALL IDs.

---

## Common Parameter Types

### Alert Tone Type
- `Off`: No tone
- `1`–`9`: Specific tone IDs

### Alert Tone Volume
- `Auto`: Device automatically adjusts volume
- `1`–`15`: Manual volume level

### Alert Light Color
- `Off`, `Blue`, `Red`, `Magenta`, `Green`, `Cyan`, `Yellow`, `White`

### Alert Light Pattern
- `On`: LED steady on
- `Slow Blink`: LED blinks slowly
- `Fast Blink`: LED blinks rapidly

### Digital Waiting Time
- Range: `0–1000` milliseconds (1 = 1 ms)

### Digital Threshold Mode
- `Auto`, `Manual`, `Default`

### Digital Threshold Level
- Range: `5–13` (only used when mode is `Manual`)

---

## File/Folder Layout (Top Level)

- **Observed in sample data**: `TargetModel` and `FormatVersion` appear as leading records in many config files (e.g., `hpdb.cfg`, `profile.cfg`, `scanner.inf`, `app_data.cfg`, `f_list.cfg`).

- `scanner.inf` — scanner information ([Scanner record](record_types/scanner_profile_records.md#scanner))
- `profile.cfg` — profile/settings ([ProductName, GlobalSetting](record_types/scanner_profile_records.md))
- `app_data.cfg` — runtime scan state ([Scan* records](record_types/scan_records.md))
- `favorites_lists/f_list.cfg` — favorites list index ([F-List records](record_types/favorites_records.md#f-list))
- `favorites_lists/f_*.hpd` — favorites list systems (same record types as HPDB with null IDs in some cases)
- `HPDB/hpdb.cfg` — HPDB metadata ([DateModified, StateInfo, CountyInfo, LM](record_types/hpdb_records.md))
- `HPDB/s_*.hpd` — HPDB systems and channels ([System records](record_types/system_records.md))
- `*.avoid` — avoid lists ([Avoid records](record_types/favorites_records.md#avoid))
- `discovery.cfg` — discovery settings ([ConvDiscovery, TrunkDiscovery](record_types/discovery_records.md))
	- **Observed in sample data**: filename is `discvery.cfg` and includes only `TargetModel` and `FormatVersion`.

---

## Related References

- [HPDB Records](record_types/hpdb_records.md)
- [System Records](record_types/system_records.md)
- [Favorites Records](record_types/favorites_records.md)
- [Scan Configuration Records](record_types/scan_records.md)
- [Scanner/Profile Records](record_types/scanner_profile_records.md)
- [Discovery Records](record_types/discovery_records.md)

---

[← Back to Main Index](README.md)
